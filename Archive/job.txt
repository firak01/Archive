clearscreen.
run langKernel. //Deklariere die "Language Konstanten."
set langCallerName to "job".
run DEBUG_Caller(langCallerName).

//##################################
//### Starte von der Startbahn 
//##################################
run libKerbal. //Soll die globalen Variablen für den Planeten deklarieren.
run lib7p08.   //Deklariere die "Flugzeug Konstanten"

//### UNIT - TESTS --- NICHT löschen
//run testLIST_count.
//run testLIST_intersection.
//run testLIST_contains.
//run testOBJECT_isList.
//wait 10.
//run testPrg.
//wait 30.

//TODO: 2 Zeilen Footer , davon 1 Trennlienie und von der Terminalgröße ausgehen.
//run subConsoleFooter.

//Merke: Paramter sind 
set args TO LIST().
set args:ADD to libLaunchSpeedMin.
set args:ADD to libLaunchSpeedAutoMax.
set args:ADD to libLaunchGroundSteeringSpeedAutoMax.
set args:ADD to libTargKscRunEnd.
set args:ADD to libTargPolNor.

set prgPlaneStart_Return to LIST(). //Rückgabewert, muss hier schon deklariert werden.
run prgPlaneStart (args,prgPlaneStart_Return).
run DEBUG_print("Startphase beendet. Anzahl ReturnWerte: " + prgPlaneStart_Return:LENGTH).

//Prüfe den Status des Programms
//a) Rückgabwerte entgegennehmen.
set iIndex to -1.
set prgPlaneStartStatus to "0".
for argReturn IN prgPlaneStart_Return {
	set sReturn to argReturn.
	run DEBUG_print("ReturnWert: " + sReturn). //argReturn gilt nur innerhalb der Schleife...
	set iIndex to iIndex + 1.
	if iIndex = 0 {
		set prgPlaneStartStatus to sReturn.		
		}.
	if iIndex = 1 {		
		}.
	if iIndex = 2 {
		}.
	}.
	
//b) Rückgabwerte analysieren.
if prgPlaneStartStatus = "1" {
	run DEBUG_print1("Startgeschwindigkeit zu spät erreicht. Bremse ab.").
	
	//Eingabearray leeren.
	set iCount to args:LENGTH.
	for argIn In args {
		set iCount to iCount -1.
		set args:Remove to iCount.
	}
	
	LOCK THROTTLE TO 0.
	BRAKE On.
	
	}. //END START ERFOLGREICH
	
	
	
	if prgPlaneStartStatus = "2" {
		run DEBUG_print("Erfolgreich hochgezogen. Nehme Kurs auf.").
		
		//auch dass geht nicht args:CLEAR. //KEIN SET DAVOR
		set iHeightGoal to 12000. //Sets desired height of plane.
		set iDistTargGoal to 2000. //Set desired distance to Target in meter.

		set args:add To iHeightGoal. 
		set args:add TO iDistTargGoal.
		set args:add TO libTargPolNor. //Nordpol als Ziel
		
		//Nun auf Höhe gehen und das Ziel ansteuern.
		set prgPlaneFligth_Return to LIST(). //Rückgabewert
		run prgPlaneFlight(args,prgPlaneFlight_Return).
	}.
if prgPlaneStartStatus = "0" {
	run DEBUG_print("Nicht gestartet.").
	}.
if prgPlaneStartStatus = "-99" {
	run DEBUG_print( "ERROR beim Start.").
	}.








